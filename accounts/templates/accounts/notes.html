{% extends "base.html" %}
{% block title %}Notes Â· csbproject{% endblock %}

{% block content %}
  <h1>Notes</h1>

  <form method="post" novalidate>
    {% csrf_token %}
    {{ form.content }}
    <button type="submit">Save</button>
  </form>

  {% if notes %}
    <ul>
      {% for note in notes %}
        <li>
          <!-- A03 VULNERABILITY: XSS - |safe filter allows raw HTML execution -->
          <!-- ORIGINAL SAFE VERSION (commented out): -->
          <!-- <div>{{ note.content }}</div> -->
          <!-- FIX: Uncomment the line above and remove |safe filter below -->
          <div>{{ note.content|safe }}</div>
          <div style="color:#666;font-size:.9rem">
            {{ note.created_at|date:"M d, Y H:i" }}
            <a href="{% url 'transfer_note' note.id %}" 
               style="color: #007bff; text-decoration: none; margin-left: 10px;">
               ðŸ“¤ Transfer
            </a>
          </div>
        </li>
      {% endfor %}
    </ul>
  {% else %}
    <p>No notes yet.</p>
  {% endif %}
{% endblock %}
